<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 外部调用 Emacs 渲染 orgmode · M-x codefalling</title><meta name="description" content="外部调用 Emacs 渲染 orgmode - codefalling"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.lug.ustc.edu.cn/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div id="mask" style="display: none;"><img id="mask-image" src="#" style=" "></div><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/codefalling" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">外部调用 Emacs 渲染 orgmode</h1><div class="post-time">Nov 13, 2015</div><div class="post-content">

<script>
  function editAtGithub(isRaw){
    var url_parts = document.location.pathname.split('/');
    var postname = url_parts[url_parts.length - 2];
    if(url_parts.length == 3){ // is a page(wiki about etc)
      postname = postname + '/index.org';
    }else{
      postname = '_posts/' + postname + '.org';
    }
    var url = 'https://github.com/CodeFalling/codefalling.com/tree/source/source/' + postname;
    if(isRaw)
      url = 'https://raw.githubusercontent.com/CodeFalling/codefalling.com/source/source/' + postname;
    window.open(url);
  }
</script>


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">&#x5F15;&#x5B50;</h2>
<div class="outline-text-2" id="text-1">
<p>
&#x56E0;&#x4E3A;&#x524D;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5C1D;&#x8BD5;&#x7ED9; hexo &#x5199;&#x4E00;&#x4E2A; orgmode &#x7684; renderer&#xFF0C;&#x6240;&#x4EE5;&#x5230;&#x5904;&#x627E;&#x5404;&#x79CD;&#x5C06; orgmode &#x8F6C;&#x5316;&#x4E3A; html &#x7684;&#x65B9;&#x5F0F;&#x3002;orgmode &#x4E0D;&#x5982; markdown &#x6D41;&#x884C;&#x4E14;&#x529F;&#x80FD;&#x590D;&#x6742;&#xFF08;&#x5728; orgmode &#x5F00;&#x53D1;&#x7EC4;&#x7684;&#x5DE5;&#x4F5C;&#x4E0B;&#x8FD8;&#x5728;&#x6F14;&#x8FDB;&#xFF09;&#x3002;&#x6B64;&#x524D;&#x6211;&#x66FE;&#x5C1D;&#x8BD5; <a href="https://github.com/mooz/org-js" target="_blank" rel="external">mooz/org-js</a> &#xFF0C;&#x4F5C;&#x8005;&#x505A;&#x7684;&#x786E;&#x5B9E;&#x5F88;&#x6F02;&#x4EAE;&#xFF0C;&#x4F46;&#x662F;&#x4F3C;&#x4E4E;&#x5F00;&#x53D1;&#x9677;&#x5165;&#x505C;&#x6EDE;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x6709;&#x592A;&#x591A;&#x7684;&#x7279;&#x6027;&#x9700;&#x8981;&#x652F;&#x6301;&#xFF0C;&#x4E8E;&#x662F;&#x4FBF;&#x60F3;&#x5230;&#x8C03;&#x7528; emacs &#x672C;&#x8EAB;&#x8FDB;&#x884C;&#x6E32;&#x67D3;&#x3002;
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Run Emacs Lisp in Commmand-line</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">Hello World</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">emacs --batch --execute <span class="string">&apos;(message &quot;hello,world!&quot;)&apos;</span> --kill</span><br></pre></td></tr></table></figure>
</div>

<a id="more"></a>

<p>
&#x8981;&#x6CE8;&#x610F; <code>emacs --batch</code> &#x5C06; <code>message</code> &#x7684;&#x8F93;&#x51FA;&#x5168;&#x90E8;&#x8F93;&#x51FA;&#x5230;&#x4E86; <code>stderr</code> &#xFF0C;&#x6211;&#x4E5F;&#x4E0D;&#x77E5;&#x9053;&#x539F;&#x56E0;&#x3002;
</p>

<p>
<code>--batch--</code> &#x5728; <code>emacs -help</code> &#x91CC;&#x6709;&#x63CF;&#x8FF0;
</p>

<blockquote>
<p>
&#x2013;batch:                    do not do interactive display; implies -q
</p>
</blockquote>

<p>
&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x53EA;&#x52A0;&#x8F7D;&#x4E86; <code>emacs lisp</code> &#x7684;&#x89E3;&#x91CA;&#x5668;&#xFF0C;&#x800C;&#x4E0D;&#x52A0;&#x8F7D;&#x56FE;&#x5F62;&#x754C;&#x9762;&#xFF08;&#x4E3A;&#x540E;&#x9762;&#x4E00;&#x4E2A;&#x5751;&#x57CB;&#x4E0B;&#x4F0F;&#x7B14;&#xFF09;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x60C5;&#x51B5;&#x4E0B; emacs &#x52A0;&#x8F7D;&#x7684;&#x901F;&#x5EA6;&#x8FD8;&#x662F;&#x76F8;&#x5F53;&#x8BA9;&#x4EBA;&#x6EE1;&#x610F;&#x7684;&#xFF0C;&#x4E0A;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x5728;&#x6211;&#x8FD9;&#x91CC;&#x6267;&#x884C;&#x4E4B;&#x82B1;&#x4E86; 0.090s&#x3002;
</p>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">org2html</h3>
<div class="outline-text-3" id="text-2-2">
<p>
&#x53EF;&#x4EE5;&#x5C1D;&#x8BD5;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684; <code>test.org</code> &#x7136;&#x540E;&#x6267;&#x884C;
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">emacs --batch --execute &apos;(progn (find-file &quot;test.org&quot;)(org-html-export-as-html)(message &quot;%s&quot; (buffer-string)))&apos; --kill</span><br></pre></td></tr></table></figure>
</div>

<p>
&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x7ED3;&#x679C;&#x4ECE;&#x7EC8;&#x7AEF;&#x4E0A;&#x8F93;&#x51FA;&#x4E86;~
</p>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3">Trouble Shooting</h3>
<div class="outline-text-3" id="text-2-3">
</div><div id="outline-container-sec-2-3-1" class="outline-4">
<h4 id="sec-2-3-1">htmlize &#x4E0D;&#x80FD;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;</h4>
<div class="outline-text-4" id="text-2-3-1">
<p>
&#x4E0A;&#x9762;&#x63D0;&#x5230; batch &#x662F;&#x4E0D;&#x52A0;&#x8F7D; UI &#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x4F9D;&#x8D56; UI &#x914D;&#x8272;&#x7684; <code>htmlize</code> &#x4E0D;&#x80FD;&#x6B63;&#x5E38;&#x4F7F;&#x7528;&#x3002;&#x4E0D;&#x8FC7;&#x901A;&#x8FC7;&#x624B;&#x52A8;&#x589E;&#x52A0; <code>load-path</code> &#x5E76;&#x4E14;&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x7684; <code>font-lock</code> &#x4E5F;&#x53EF;&#x4EE5;&#x5DE5;&#x4F5C;&#x3002;
</p>

<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="comment">;; Make sure the the htmlize library is in load-path.</span></span><br><span class="line"><span class="list">(<span class="keyword">custom-set-faces</span></span><br><span class="line"> <span class="quoted">&apos;(default                      ((<span class="literal">t</span> (:foreground <span class="string">&quot;#ffffff&quot;</span> :background <span class="string">&quot;black&quot;</span>))))</span></span><br><span class="line"> <span class="quoted">&apos;(font-lock-builtin-face       ((<span class="literal">t</span> (:foreground <span class="string">&quot;#ff0000&quot;</span>))))</span></span><br><span class="line"> <span class="quoted">&apos;(font-lock-comment-face       ((<span class="literal">t</span> (:bold <span class="literal">t</span> :foreground <span class="string">&quot;#333300&quot;</span>))))</span></span><br><span class="line"> <span class="quoted">&apos;(font-lock-constant-face      ((<span class="literal">t</span> (:foreground <span class="string">&quot;magenta&quot;</span>))))</span></span><br><span class="line"> <span class="quoted">&apos;(font-lock-function-name-face ((<span class="literal">t</span> (:bold <span class="literal">t</span> :foreground <span class="string">&quot;Blue&quot;</span>))))</span></span><br><span class="line"> <span class="quoted">&apos;(font-lock-keyword-face       ((<span class="literal">t</span> (:foreground <span class="string">&quot;yellow3&quot;</span>))))</span></span><br><span class="line"> <span class="quoted">&apos;(font-lock-string-face        ((<span class="literal">t</span> (:foreground <span class="string">&quot;light blue&quot;</span>))))</span></span><br><span class="line"> <span class="quoted">&apos;(font-lock-type-face    ((<span class="literal">t</span> (:foreground <span class="string">&quot;green&quot;</span>))))</span></span><br><span class="line"> <span class="quoted">&apos;(font-lock-variable-name-face ((<span class="literal">t</span> (:foreground <span class="string">&quot;cyan&quot;</span> :bold <span class="literal">t</span>))))</span></span><br><span class="line"> <span class="quoted">&apos;(font-lock-warning-face       ((<span class="literal">t</span> (:foreground <span class="string">&quot;red&quot;</span> :weight bold))))</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> htmlize-use-rgb-map <span class="quoted">&apos;force</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">&apos;htmlize</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-2" class="outline-4">
<h4 id="sec-2-3-2">org-html-fontify-code: Wrong number of arguments</h4>
<div class="outline-text-4" id="text-2-3-2">
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> org-font-lock-ensure <span class="list">()</span></span><br><span class="line">  <span class="list">(<span class="keyword">font-lock-fontify-buffer</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>

<p>
&#x8FD9;&#x662F;&#x6765;&#x81EA; <a href="http://wenshanren.org/?p=768" target="_blank" rel="external">Emacs: org-html-export &#x65F6;&#x51FA;&#x73B0; org-html-fontify-code: Wrong number of arguments&#x2026; | &#x8089;&#x5C71;&#x535A;&#x5BA2; (Wenshan&apos;s Blog)</a> &#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">&#x5EF6;&#x4F38;&#x9605;&#x8BFB;</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li><a href="http://wenshanren.org/?p=768" target="_blank" rel="external">Emacs: org-html-export &#x65F6;&#x51FA;&#x73B0; org-html-fontify-code: Wrong number of arguments&#x2026; | &#x8089;&#x5C71;&#x535A;&#x5BA2; (Wenshan&apos;s Blog)</a>
</li>
<li><a href="http://comments.gmane.org/gmane.emacs.orgmode/60331" target="_blank" rel="external">htmlize doesn&apos;t work in &#x2013;batch mode</a>
</li>
<li><a href="http://stackoverflow.com/questions/3591337/emacs-htmlize-in-batch-mode" target="_blank" rel="external">Emacs htmlize in batch mode? - Stack Overflow</a>
</li>
</ul>
</div>
</div>

<div style="font-size: 14px;padding: 5px;line-height: 20px;border: 1px solid;"><a href="javascript: editAtGithub();" target="_blank" rel="external">Edit Me at Github</a> - <a href="javascript: editAtGithub(true)" target="_blank" rel="external">Org Source</a> - Last Updated 2016-04-21 &#x56DB; 19:49.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" target="_blank" rel="external">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" target="_blank" rel="external">Emacs</a> 25.0.92.1 (<a href="http://orgmode.org" target="_blank" rel="external">Org</a> mode 8.2.10)</div>
</div></article></div></section><footer><div class="paginator"><a href="/2015/11/15/new-version-of-hexo-renderer-org/" class="prev">PREV</a><a href="/2015/11/02/fcitx-vim-for-OS-X/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'codefalling';
var disqus_identifier = '2015/11/13/use-emacs-to-renderer-org-in-command-line/';
var disqus_title = '外部调用 Emacs 渲染 orgmode';
var disqus_url = 'http://codefalling.com/2015/11/13/use-emacs-to-renderer-org-in-command-line/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//codefalling.disqus.com/count.js" async></script><div class="copyright"><p>© 2016 <a href="http://codefalling.com">codefalling</a>, unless otherwise noted.</p></div></footer></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-72449503-1",'auto');ga('send','pageview');</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>