<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 在ES6中模拟拓展运算符 · M-x codefalling</title><meta name="description" content="在ES6中模拟拓展运算符 - codefalling"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div id="mask" style="display: none;"><img id="mask-image" src="#" style=" "></div><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/codefalling" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">在ES6中模拟拓展运算符</h1><div class="post-time">Mar 22, 2016</div><div class="post-content"><h1 id="&#x62D3;&#x5C55;&#x8FD0;&#x7B97;&#x7B26;"><a href="#&#x62D3;&#x5C55;&#x8FD0;&#x7B97;&#x7B26;" class="headerlink" title="&#x62D3;&#x5C55;&#x8FD0;&#x7B97;&#x7B26;"></a>&#x62D3;&#x5C55;&#x8FD0;&#x7B97;&#x7B26;</h1><p>JavaScript &#x5728; ES6 &#x4E2D;&#x5F15;&#x5165;&#x4E86;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator" target="_blank" rel="external">&#x62D3;&#x5C55;&#x8FD0;&#x7B97;&#x7B26;</a>&#xFF0C; &#x53EF;&#x4EE5;&#x628A;&#x53EF;&#x904D;&#x5386;&#x5BF9;&#x8C61;&#xFF08;&#x4F8B;&#x5982;&#x6570;&#x7EC4;&#xFF09;&#x76F4;&#x63A5;&#x62D3;&#x5C55;&#x4E3A;&#x53C2;&#x6570;&#x5217;&#x8868;&#x3002;&#x4F8B;&#x5982;&#x6570;&#x7EC4;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> args = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max(args)) <span class="comment">// output: NaN, &#x56E0;&#x4E3A; Math.max &#x7684;&#x53C2;&#x6570;&#x4E0D;&#x662F;&#x6570;&#x7EC4;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max(...args)) <span class="comment">// output: 3</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="&#x7B80;&#x5355;&#x7684;&#x6A21;&#x62DF;"><a href="#&#x7B80;&#x5355;&#x7684;&#x6A21;&#x62DF;" class="headerlink" title="&#x7B80;&#x5355;&#x7684;&#x6A21;&#x62DF;"></a>&#x7B80;&#x5355;&#x7684;&#x6A21;&#x62DF;</h1><p>&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x5728; ES5 &#x4E2D;&#x5176;&#x5B9E;&#x4E5F;&#x5F88;&#x5BB9;&#x6613;&#x5B9E;&#x73B0;&#xFF0C;&#x53EA;&#x8981;&#x7528; <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" target="_blank" rel="external">apply</a> &#x5C31;&#x53EF;&#x4EE5;&#x4E86;</p>
<p><code>apply</code> &#x7684;&#x7528;&#x6CD5;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun.apply(thisArg, [argsArray])</span><br></pre></td></tr></table></figure>
<p><code>thisArg</code> &#x8868;&#x793A;&#x7ED1;&#x5B9A;&#x7684; <code>this</code> &#xFF0C;&#x800C; <code>argsArray</code> &#x6070;&#x5DE7;&#x5C31;&#x662F;&#x7528;&#x6570;&#x7EC4;&#x3002;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max.apply(<span class="literal">null</span>,args)) <span class="comment">// output: 3</span></span><br></pre></td></tr></table></figure>
<h1 id="&#x590D;&#x6742;&#x7684;&#x60C5;&#x51B5;&#xFF1A;&#x6784;&#x9020;&#x51FD;&#x6570;"><a href="#&#x590D;&#x6742;&#x7684;&#x60C5;&#x51B5;&#xFF1A;&#x6784;&#x9020;&#x51FD;&#x6570;" class="headerlink" title="&#x590D;&#x6742;&#x7684;&#x60C5;&#x51B5;&#xFF1A;&#x6784;&#x9020;&#x51FD;&#x6570;"></a>&#x590D;&#x6742;&#x7684;&#x60C5;&#x51B5;&#xFF1A;&#x6784;&#x9020;&#x51FD;&#x6570;</h1><p>&#x5982;&#x679C;&#x53EA;&#x6709;&#x4E0A;&#x9762;&#x4E00;&#x79CD;&#x7B80;&#x5355;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x4E5F;&#x5C31;&#x6CA1;&#x6709;&#x5F15;&#x5165;&#x62D3;&#x5C55;&#x8FD0;&#x7B97;&#x7B26;&#x7684;&#x5FC5;&#x8981;&#x4E86;&#x3002;&#x4F46;&#x6709;&#x65F6;&#x5019;&#x60C5;&#x51B5;&#x4F1A;&#x53D8;&#x5F97;&#x590D;&#x6742;&#xFF0C;&#x4F8B;&#x5982;&#x6784;&#x9020;&#x51FD;&#x6570;&#x3002;&#x770B;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">this</span>.result = <span class="built_in">arguments</span>[<span class="number">0</span>] + <span class="built_in">arguments</span>[<span class="number">1</span>]</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newObj</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="comment">// ES6</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Obj(...arguments)</span><br><span class="line">}</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Obj(<span class="number">3</span>,<span class="number">4</span>).result) <span class="comment">// output: 7</span></span><br><span class="line"><span class="built_in">console</span>.log(newObj(<span class="number">3</span>,<span class="number">4</span>).result)  <span class="comment">// output: 7</span></span><br></pre></td></tr></table></figure>
<p>&#x7531;&#x4E8E;&#x8FD9;&#x91CC;&#x6D89;&#x53CA;&#x5230;&#x4E86; <code>new</code> &#x7684;&#x4F7F;&#x7528;&#xFF0C; <code>Obj</code> &#x88AB;&#x4F5C;&#x4E3A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x800C;&#x4E0D;&#x662F;&#x7B80;&#x5355;&#x7684;&#x51FD;&#x6570;&#x8C03;&#x7528;&#xFF0C;&#x4E8E;&#x662F; <code>apply</code> &#x4E5F;&#x5C31;&#x4E0D;&#x80FD;&#x5B9E;&#x73B0;&#x540C;&#x6837;&#x7684;&#x6548;&#x679C;&#x3002;[[1]] &#x3002;</p>
<h2 id="&#x901A;&#x8FC7;-bind-&#x5B9E;&#x73B0;"><a href="#&#x901A;&#x8FC7;-bind-&#x5B9E;&#x73B0;" class="headerlink" title="&#x901A;&#x8FC7; bind &#x5B9E;&#x73B0;"></a>&#x901A;&#x8FC7; bind &#x5B9E;&#x73B0;</h2><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind" target="_blank" rel="external">bind</a> &#x5E38;&#x7528;&#x4E8E;&#x7ED1;&#x5B9A; <code>this</code> &#xFF0C;&#x4F46;&#x5176;&#x5B9E;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x7ED1;&#x5B9A; <code>arguments</code> &#xFF0C;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> new_max = <span class="built_in">Math</span>.max.bind(<span class="literal">null</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>)</span><br><span class="line">new_max(<span class="number">1</span>, <span class="number">2</span>) <span class="comment">// &#x65E0;&#x8BBA;&#x53C2;&#x6570;&#x662F;&#x4EC0;&#x4E48;&#x8FD4;&#x56DE;&#x503C;&#x90FD;&#x662F; 7 [max(4, 5, 6, 7)]</span></span><br></pre></td></tr></table></figure>
<p>&#x5728; <code>bind</code> &#x8FD4;&#x56DE;&#x7684;&#x51FD;&#x6570;&#x4F5C;&#x4E3A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x65F6;&#xFF0C; <code>bind</code> &#x7684; <code>this</code> &#x4F1A;&#x5931;&#x6548;&#xFF0C;&#x4F46; <code>arguments</code> &#x4ECD;&#x7136;&#x6709;&#x6548;&#x3002; [[2]]</p>
<p>&#x8FD9;&#x79CD;&#x7279;&#x6027;&#x6B63;&#x597D;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5B8C;&#x6210;&#x6211;&#x4EEC;&#x7684;&#x76EE;&#x7684;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">this</span>.result = <span class="built_in">arguments</span>[<span class="number">0</span>] + <span class="built_in">arguments</span>[<span class="number">1</span>]</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newObj</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="comment">// ES5</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> (Obj.bind.apply([<span class="literal">null</span>].concat(<span class="built_in">Array</span>.prototype.call(<span class="built_in">arguments</span>))))</span><br><span class="line">}</span><br><span class="line"><span class="built_in">console</span>.log(newObj(<span class="number">4</span>,<span class="number">5</span>).result)     <span class="comment">// return 9</span></span><br></pre></td></tr></table></figure>
<p>&#x5176;&#x4E2D; <code>Array.prototype.call(arguments)</code> &#x662F;&#x4E3A;&#x4E86;&#x628A; <code>arguments</code> &#x8F6C;&#x5316;&#x4E3A;&#x771F;&#x6B63;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x4E3A; <code>null</code> &#x7684;&#x6570;&#x7EC4;&#x6784;&#x6210; <code>bind</code> &#x9700;&#x8981;&#x7684;&#x53C2;&#x6570;&#x5217;&#x8868;&#x5E76; <code>apply</code> ,&#x5C31;&#x80FD;&#x591F;&#x6B63;&#x786E;&#x7684;&#x4F5C;&#x4E3A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4F7F;&#x7528;&#x4E86;&#x3002;</p>
<h2 id="&#x6784;&#x9020;&#x9AD8;&#x9636;&#x51FD;&#x6570;"><a href="#&#x6784;&#x9020;&#x9AD8;&#x9636;&#x51FD;&#x6570;" class="headerlink" title="&#x6784;&#x9020;&#x9AD8;&#x9636;&#x51FD;&#x6570;"></a>&#x6784;&#x9020;&#x9AD8;&#x9636;&#x51FD;&#x6570;</h2><p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#x770B;&#xFF0C;bind &#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4E00;&#x4E2A;&#x9AD8;&#x9636;&#x51FD;&#x6570;&#xFF08;&#x8FD4;&#x56DE;&#x51FD;&#x6570;&#x7684;&#x51FD;&#x6570;&#xFF09;&#xFF0C;&#x53EA;&#x662F;&#x5B83;&#x6B63;&#x597D;&#x6EE1;&#x8DB3;&#x4E86;&#x6211;&#x4EEC;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6784;&#x9020;&#x4E00;&#x4E2A;&#x9AD8;&#x9636;&#x51FD;&#x6570;&#x6765;&#x8FBE;&#x5230;&#x76EE;&#x7684;&#x3002;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">this</span>.result = <span class="built_in">arguments</span>[<span class="number">0</span>] + <span class="built_in">arguments</span>[<span class="number">1</span>]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcWithArgArray</span>(<span class="params">func, argArray</span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">        func.apply(<span class="keyword">this</span>, argArray)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newObj</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> (funcWithArgArray(Obj, <span class="built_in">arguments</span>))</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(newObj(<span class="number">3</span>,<span class="number">4</span>))  <span class="comment">// output: 7</span></span><br></pre></td></tr></table></figure>
<h1 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h1><p>&#x4E0A;&#x9762;&#x7684;&#x51E0;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x9664;&#x4E86;&#x5728;&#x5168;&#x9762;&#x62E5;&#x62B1; ES6 &#x524D;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x7B49;&#x4EF7;&#x7684;&#x5199;&#x6CD5;&#x5916;&#xFF0C;&#x4E5F;&#x4F53;&#x73B0;&#x4E86; JavaScript &#x5F3A;&#x5927;&#x7684;&#x8868;&#x73B0;&#x529B;&#xFF0C;&#x9AD8;&#x9636;&#x51FD;&#x6570;&#x7684;&#x6070;&#x5F53;&#x4F7F;&#x7528;&#x8BA9; JavaScript &#x6563;&#x53D1;&#x7740; Lisp &#x7684;&#x5149;&#x8F89;&#x3002; </p>
<p>[1] &#x53C2;&#x89C1; <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator#Apply_for_new" target="_blank" rel="external">Apply for new</a></p>
<p>[2] &#x53C2;&#x89C1;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind#Bound_functions_used_as_constructors" target="_blank" rel="external">Bound functions used as constructors</a></p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/03/25/virtual-dom-simple-implementation/" class="prev">PREV</a><a href="/2016/01/24/unix-env-in-windows-with-vagrant/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'codefalling';
var disqus_identifier = '2016/03/22/fake-rest-in-es5/';
var disqus_title = '在ES6中模拟拓展运算符';
var disqus_url = 'http://codefalling.com/2016/03/22/fake-rest-in-es5/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//codefalling.disqus.com/count.js" async></script><div class="copyright"><p>© 2016 <a href="http://codefalling.com">codefalling</a>, unless otherwise noted.</p></div></footer></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-72449503-1",'auto');ga('send','pageview');</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>